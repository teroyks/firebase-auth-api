<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Logged in</title>
  </head>
  <body>
    <main>
      <h1>Firebase Test App</h1>
      <div id="firebaseui-auth-container"></div>
    </main>
    <script src="https://www.gstatic.com/firebasejs/5.9.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.9.1/firebase-auth.js"></script>
    <script src="firebase.js"></script>

    <script type="text/javascript">
      const content = document.getElementById('firebaseui-auth-container')
      firebase.auth().onAuthStateChanged(user => {
        if (user) {
          console.log('logged in', user)
          content.innerHTML = `<p>Successfully logged in as ${
            user.displayName
          }</p>
          <p><button onClick="firebase.auth().signOut();">Logout</button></p>`
          user.getIdToken().then(token => console.log(`uid token: ${token}`))
        } else {
          content.innerHTML = '<a href="login.html">Login</a>'
        }
      })
    </script>
  </body>
</html>
